<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Survey</title>

  <!-- Link to the jQuery Library -->
  <script src="https://code.jquery.com/jquery-2.2.3.js" integrity="sha256-laXWtGydpwqJ8JA+X9x2miwmaiKhn8tVmOVEigRNtP4=" crossorigin="anonymous"></script>

   <!-- Link to the Bootstrap library -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <!-- link to bootstrap.min.js so that the modal will work -->

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

</head>

<body>

  <div class="container">

    <h2>Survey Questions</h2>
    <hr>
    <h3>About You</h3>
    <form>
      Name (Required)<br>
      <input type="text" class="form-control" id="name">
      <br>
      Link to Photo Image (Required)<br>
      <input type="text" class="form-control" id="pic">
      <br>
    </form>

    <hr>
    <h3>Question 1</h3>
    <h4>I like to spend time outside, no matter what the weather.</h4>
    <select id="question1">
      <option value = "1">1 (Strongly Disagree)</option>
      <option value = "2">2</option>
      <option value = "3">3</option>
      <option value = "4">4</option>
      <option value = "5">5 (Strongly Agree)</option>      
    </select>

    <h3>Question 2</h3>
    <h4>Hobbies are more fun than television.</h4>
    <select id="question2">
      <option value = "1">1 (Strongly Disagree)</option>
      <option value = "2">2</option>
      <option value = "3">3</option>
      <option value = "4">4</option>
      <option value = "5">5 (Strongly Agree)</option>      
    </select>

    <h3>Question 3</h3>
    <h4>I prefer healthy foods.</h4>
    <select id="question3">
      <option value = "1">1 (Strongly Disagree)</option>
      <option value = "2">2</option>
      <option value = "3">3</option>
      <option value = "4">4</option>
      <option value = "5">5 (Strongly Agree)</option>      
    </select>

    <h3>Question 4</h3>
    <h4>My pets are a great source of happiness.</h4>
    <select id="question4">
      <option value = "1">1 (Strongly Disagree)</option>
      <option value = "2">2</option>
      <option value = "3">3</option>
      <option value = "4">4</option>
      <option value = "5">5 (Strongly Agree)</option>      
    </select>

    <h3>Question 5</h3>
    <h4>I believe that regulations are necessary to protect our environment.</h4>
    <select id="question5">
      <option value = "1">1 (Strongly Disagree)</option>
      <option value = "2">2</option>
      <option value = "3">3</option>
      <option value = "4">4</option>
      <option value = "5">5 (Strongly Agree)</option>      
    </select>

    <h3>Question 6</h3>
    <h4>I enjoy going to the movies.</h4>
    <select id="question6">
      <option value = "1">1 (Strongly Disagree)</option>
      <option value = "2">2</option>
      <option value = "3">3</option>
      <option value = "4">4</option>
      <option value = "5">5 (Strongly Agree)</option>      
    </select>


    <h3>Question 7</h3>
    <h4>I would like to spend more time volunteering.</h4>
    <select id="question7">
      <option value = "1">1 (Strongly Disagree)</option>
      <option value = "2">2</option>
      <option value = "3">3</option>
      <option value = "4">4</option>
      <option value = "5">5 (Strongly Agree)</option>      
    </select>

    <h3>Question 8</h3>
    <h4>The beach is better than the mountains.</h4>
    <select id="question8">
      <option value = "1">1 (Strongly Disagree)</option>
      <option value = "2">2</option>
      <option value = "3">3</option>
      <option value = "4">4</option>
      <option value = "5">5 (Strongly Agree)</option>      
    </select>

        <h3>Question 9</h3>
    <h4>Crunchy cookies are better than soft cookies.</h4>
    <select id="question9">
      <option value = "1">1 (Strongly Disagree)</option>
      <option value = "2">2</option>
      <option value = "3">3</option>
      <option value = "4">4</option>
      <option value = "5">5 (Strongly Agree)</option>      
    </select>

        <h3>Question 10</h3>
    <h4>I keep a clean house.</h4>
    <select id="question10">
      <option value = "1">1 (Strongly Disagree)</option>
      <option value = "2">2</option>
      <option value = "3">3</option>
      <option value = "4">4</option>
      <option value = "5">5 (Strongly Agree)</option>      
    </select>
    <br>
    <br>
    <br>

    <button type="button" class="btn btn-primary btn-lg btn-block" id="submit">Submit</button>

    <br>
    <br>
    <a href='/api/friends'>API Friends List</a> | <a href="https://github.com/kristinesterley/FriendFinder">GitHub Repo</a>
    <br>
    <br>   
  </div> <!-- end containter for survey questions -->


<!--   </div>  --><!-- End container-->


  <!-- Modal -->
    <div id="myModal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Your Best Match</h4>
          </div>
          <div class="modal-body">
            <h2 id="matchName"></h2>
            <img id="matchPhoto">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>

      </div>
    </div>


    <script type="text/javascript">

     $("#submit").on("click",function(){

      //before processing, make sure user entered a name and a photo

        if ($("#name").val() && $("#pic").val()){

          var answerArray = [];
          for (var i=1; i<=10; i++){
            var temp = parseInt($("#question"+ i).val().trim());
            answerArray.push(temp); 
          }
          var newFriend = {
            name: $("#name").val().trim(),
            photo: $("#pic").val().trim(),
            scores: answerArray
          };

          $.post("/api/friends", newFriend)
          .done(function(data) {
            //put modal here with data.name and data.photo

            $("#matchName").text(data.name);
            $("#matchPhoto").attr("src",data.photo);
            $("#myModal").modal('toggle');
          
          });
        }//end if
        else {
          alert("Please enter your name and provide a link to your photo.")
        }
      });//end click event for submit
    </script>

</body>
</html>